{% extends 'new_design/base.html' %}
{% load static %}

{% block title %}
Отправленные
{% endblock %}

{% block style %}
<style type="text/css">

		.row .col{
			padding:0px;
		}
		.row .col.s3{
			width:20%;
		}
        #wait, #fast, #success, #edit, #error{
            display: flex;
            justify-content: center;
            width: 100%;
            flex-direction: column;
            align-items: center;
        }
        .row_card{
            margin:auto 10px !important;
        }

        .note_detail_div{
          padding:20px;
        }
        @media only screen and (max-width: 992px){
          .pagination {
              width: auto;
          }
        }
          .tabs{
                box-shadow: 0 2px 2px 0 rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%), 0 1px 5px 0 rgb(0 0 0 / 0%);
          }

    .tags {
        display: flex;
        flex-direction: row;
        width:inherit;
        flex-wrap: wrap;
        justify-content: center;
        margin: 20px auto;
    }

    label.tag {
        cursor: pointer;
        margin: 5px;
        padding: 7px;
        border-radius: 5px;
        background-color: grey;
        color: white;
        transition: background-color .3s ease;
    }

    .tags input[type="checkbox"] {
        display: none;
    }

    input:checked + label.tag {
        background-color: #9ccc65;
    }

    .user_select {
        display: flex;
        justify-content: center;
        margin-top: 10px;
    }

    .user_select_number {
        background: #5096ff;
        border-top-left-radius: 10px;
        height: min-content;
        padding: 8px 10px;
        color: white;
        border-bottom-left-radius: 10px;
    }

    .form_box select {
        border-bottom-left-radius: 0px;
        border-top-left-radius: 0px;
    }
    .select_buttons {
        width: 369px;
        margin: 15px auto;
        display: flex;
        flex-direction: row;
        margin-top: 40px;
        align-items: center;
        justify-content: space-between;
    }
    .delete_select_button{
        align-items: center;
        padding: 5px;
        margin-bottom: 20px;
        display: flex;
        justify-content: center;
        color: white;
        height: 20px;
        margin-top: -15px;
        border-radius: 4px;
        cursor: pointer;
        box-shadow: 0px 0px 3px 1px #616161;
        background-color: red;
    }
    .add_select_button {
        align-items: center;
        padding: 11px;
        font-size: 30px;
        margin-bottom: 20px;
        display: flex;
        justify-content: center;
        width: 20px;
        color: white;
        height: 20px;
        margin-top: -15px;
        border-radius: 100%;
        cursor: pointer;
        box-shadow: 0px 0px 3px 1px #616161;
        background-color: #50a6ff;
    }
    .input_files{
        display: flex;
        /* width: 458px; */
        align-items: center;
        flex-wrap: wrap;
        justify-content: center;
    }
    .input_file_label{
        border:1px dashed black;
        padding:15px 20px;
        margin-right: 20px;
        border-radius: 13px;
    }
    .input_file input{
        display: none;
    }
    .fast{
        margin: auto;
        background: grey;
        padding: 12px;
        color: white;
        border-radius: 7px;
        box-shadow: 0px 0px 3px 1px #1c1c1c;
        transition: background .3s ease;
    }
    #fast:checked+label{
        background:#ff4a4a;
    }
    label.fast{
        color: #fff;
    }
    .ck.ck-editor__main>.ck-editor__editable:not(.ck-focused) {
    border-color: #47a2ff !important;
}
.form_title{
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
}
.form_title input{
    text-align: center;
    margin-left: 10px;
    width: 60px !important;
}
.create_note_modal{
    background-color: inherit !important;
    margin: 0% auto !important;
    padding: 20px !important;
    border: 0px !important;
    width: 80% !important;
    z-index: 99999 !important;
    border-radius: 10px !important;
}
select{
    display: inherit;
    background-color: rgba(255,255,255,0.9);
    padding: inherit;
    border: 1px solid #f2f2f2;
    border-radius: inherit;
    height: inherit;
}
.note_number_input{
    font-size:21px;
    color: grey;
    text-align: center;
}
.form_button{
    display: block;
    margin: auto;
}
.switch{
    width: fit-content;
    margin: auto;
    display: block;
    margin-bottom: 25px;
}
</style>
{% endblock %}

{% block content %}
  <div id="modal1" class="modal">
    <div class="modal-content">
      <h4>Modal Header</h4>
      <p>A bunch of text</p>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
    </div>
  </div>
  <div id="modal_create" class="modal">
    <div class="modal_content create_note_modal">
        <form action="" method="" class="form_box" enctype="multipart/form-data">
            <h5 class="form_title">
                <span>Служебная записка №</span><input type="number" class="note_number_input" autocomplete="off" name="number" min="1" value="{{number}}"></h5>

                <label for="">Название</label>
                <input type="text" name="title" autocomplete="off"  style="text-align: center" required>

                <label for="">Дата</label>
                <input type="text" name="date" autocomplete="off" class="datepicker" required value="{{ current_date }}">

                <label for="">Текст</label>
                <textarea type="text" id="editor1" autocomplete="off"  name="text" rows="4"></textarea>

                <label for="">Итого</label>
                <input type="number" name="summa" autocomplete="off"  style="text-align: center" required>

            <div class="form_item" style="margin-bottom: 30px;margin-top: 10px;">
                <label for="">Файлы</label>
                <div class="input_files">
                    <div class="input_file">
                        <input type="file" id="input_file_1" name="input_file_1" onchange="file_upload(this)">
                        <label for="input_file_1" class="input_file_label">+</label>
                    </div>
                    <div class="input_file">
                        <input type="file" id="input_file_2" name="input_file_2" onchange="file_upload(this)">
                        <label for="input_file_2" class="input_file_label">+</label>
                    </div>
                    <div class="input_file">
                        <input type="file" id="input_file_3" name="input_file_3" onchange="file_upload(this)">
                        <label for="input_file_3" class="input_file_label">+</label>
                    </div>
                    <div class="input_file">
                        <input type="file" id="input_file_4" name="input_file_4" onchange="file_upload(this)">
                        <label for="input_file_4" class="input_file_label">+</label>
                    </div>
                    <div class="input_file">
                        <input type="file" id="input_file_5" name="input_file_5" onchange="file_upload(this)">
                        <label for="input_file_5" class="input_file_label">+</label>
                    </div>
                </div>
            </div>
            <div class="form_item">
                <label for="">Кому</label>
                <div class="user_selects" id="user_selects">
                    <div class="user_select">
                        <span class="user_select_number" data-tag-id="1">1</span>
                        <select name="user_1" id="" style="width:430px;">
                            {% for user in users %}
                                <option value="{{ user.pk }}">{{ user.first_name|slice:"1" }}.{{ user.last_name }}({{ user.profile.position }})
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <div class="form_item" style="justify-content: flex-end">

            <div class="select_buttons">
                <i class="material-icons waves-green waves-effect" onclick="add_select()">add</i>
                <i class="material-icons waves-orange waves-effect" onclick="delete_select()">delete</i>
            </div>
            </div>
            <!--<div class="form_item">
                <label for="">
                    Срочно
                </label>
                <div>
            <input type="checkbox" id="slider_input" name="fast" style="display: none">
            <label for="slider_input">
                <div class="slider_wrap">
                    <div class="slider_circle"></div>
                </div>
            </label>
                </div>
            </div>-->
                <!--<div class="form_item">
                    <input type="checkbox" id="fast" style="display: none">
                    <label for="fast" class="fast">Срочно</label>
                </div>-->


            <div class="switch">
                <label>
                  Обычный
                  <input type="checkbox" name="fast">
                  <span class="lever"></span>
                  Срочный
                </label>
              </div>
            <div class="form_item" style="border-top:1px solid #cecece;padding-top:10px;">
                <div class="tags">
                    {% for tag in tags %}
                    <input type="checkbox" id="tag_{{ tag.pk }}" name="tag_{{ tag.pk }}">
                    <label class="tag" for="tag_{{ tag.pk }}">
                        {{ tag.name }}
                    </label>
                    {% endfor %}
                </div>
            </div>
            <button type="submit" class="modal-close form_button btn waves-effect">Создать</button>
        </form>
    </div>
  </div>

  	<div class="row">
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s3" data-status="wait"><a href="#test1" onclick="loadNotesList(q='wait')">В ожидании</a></li>
        <li class="tab col s3" data-status="fast"><a href="#test2" onclick="loadNotesList(q='fast')" class="active" >Срочные</a></li>
        <li class="tab col s3" data-status="success"><a href="#test3" onclick="loadNotesList(q='success')">Одобренные</a></li>
        <li class="tab col s3" data-status="edit"><a href="#test4" onclick="loadNotesList(q='edit')">Редактирование</a></li>
        <li class="tab col s3" data-status="error"><a href="#test5" onclick="loadNotesList(q='error')">Отказано</a></li>
      </ul>
    </div>


    <div id="test1" class="col s12">
        <div id="wait">

        </div>
    </div>
    <div id="test2" class="col s12">
        <div id="fast">

        </div>
    </div>
    <div id="test3" class="col s12">
        <div id="success">

        </div>
    </div>
    <div id="test4" class="col s12">
        <div id="edit">

        </div>
    </div>
    <div id="test5" class="col s12">
        <div id="error">

        </div>
    </div>

  </div>

  <div class="fixed-action-btn">
    <a class="btn-floating btn-large pulse modal-trigger" href="#modal_create" style="background: #58a5ff !important">
      <i class="large material-icons">add</i>
    </a>
  </div>
{% endblock %}

{% block script %}
    <script type="text/javascript">
      if(getCookie('display') === undefined){
        document.cookie = "display=card"
      }

        loadNotesList(q="fast");


        var preloader = '<div class="preloader-wrapper big active" style="\n' +
                 '    margin: 150px auto;\n' +
                 '    display: block;\n' +
                 '">\n' +
                 '        <div class="spinner-layer spinner-blue-only">\n' +
                 '      <div class="circle-clipper left">\n' +
                 '        <div class="circle"></div>\n' +
                 '      </div><div class="gap-patch">\n' +
                 '        <div class="circle"></div>\n' +
                 '      </div><div class="circle-clipper right">\n' +
                 '        <div class="circle"></div>\n' +
                 '      </div>\n' +
                 '    </div>\n' +
                 '    </div>';

      {% include 'include/note_detail.js' %}

        function showInfoButton(users){
          let modal = document.getElementById("modal1");
          let counter = 0;
          let users_timeline = '';
          let status = '';
          let status_img = '';
          let comment = '';
          let date_create = '';
          let user = '';

        users.forEach(elem =>{
            counter++;
            user = elem.user.first_name.substring(0,1)+'.'+elem.user.last_name;

            if (elem.status === 'success'){
                status = 'success';
                status_img = '<img src="{% static 'img/success.svg' %}" width="40" alt="">'
                date_create = elem.date_create;
            }else if(elem.status === 'edit'){
                status = 'edit';
                status_img = '<img src="{% static 'img/warning_2.svg' %}" width="40" alt="">'
                date_create = elem.date_create;
            }else if(elem.status === 'error'){
                status = 'error';
                status_img = '<img src="{% static 'img/error.svg' %}" width="40" alt="">'
                date_create = elem.date_create;
            }else {
                status_img = '<img src="{% static 'img/time_2.svg' %}" width="40" alt="">'
                date_create = '';
            }

            if (elem.comment !== null){
                comment = elem.comment;
            }else {
                comment = null;
            }




                users_timeline += `
                                <div class="timeline-item ${status}">
                    <div class="timeline-icon">
                        ${status_img}
                    </div>
                    <div className="timeline-content ${counter % 2 === 0 ? 'right' : ''}">
                <h2 style="display: flex; justify-content: space-between">${user}

                <span style="font-size: 14px;color: white">${date_create}</span></h2>
                    <p>
                    ${comment!==null ? comment : ' <p style="color: gray">Без комментариев</p> '}
                    </p>
                    </div>
                    </div>
            `
        });
        users_timeline = '<div class="timeline">' + users_timeline + '</div>';
        let div = document.createElement("div");
        div.classList.add("container");
        div.innerHTML = users_timeline;
        modal.appendChild(div);

        }


        async function getDetailNote(id){
          let modal = document.getElementById("modal1");
          modal.innerHTML = preloader;
          let url = '/fetch/notes/'+id;
          await fetch(url).then(async response => {
              if (response.status === 200) {
                  let response_data = await response.json();
                 createDetail(response_data);
                    showInfoButton(response_data.users);
              } else {
                throw new Error(response.status);
              }
            }).catch((error)=>{
              console.log(error);
              let modal = document.getElementById("modal1");
              modal.innerHTML = "<div class='connection_error'>Ошибка<br>Нет связи с сервером</div>";
            });
        }


        async function createList(data, list_id, display="card"){
            let previous_number = "";
            let next_number = "";
            let empty = '';

            data["data"].forEach(
                (i) => {
                let fast = i["fast"] ? ' <i class="material-icons" style="color: #ffbd29;margin-top: 4px;position: absolute;margin-left: 20px;">offline_bolt</i>' : '';
                let file = i["files"].length>0 ? ' <i class="material-icons right">attachment</i>' : '';
                let card_color = "";
                let card_status_text = "";
                if (i["status"] == "null"){
                  //card_color = "grey !important";
                  card_status_text = "(В ожидании)";
                }else if(i.status == "success"){
                  //card_color = "#689f38 !important";
                  card_status_text = "(Подписано)";
                }else if(i.status == "edit"){
                  //card_color = "#ffc107 !important";
                  card_status_text = "(Редактирование)";
                }else if(i.status == "error"){
                  //card_color = "#ef5350 !important";
                  card_status_text = "(Отказано)";
                }
                if (display === 'card'){
                empty+= '<div class="col s12 m4">' +
                    '<div class="row row_card"> ' +
                    '<div class="col s12 m12">' +
                    '<div class="card blue-grey darken-1" style="background: '+ card_color + '"> ' +
                    '<div class="card-content white-text">' +
                    '<span class="card-title activator grey-text text-darken-4" style="color:#fff !important;">СЗ №'
                    +i["number"] +
                     card_status_text+
                        fast +
                    '<i class="material-icons right">more_vert</i>\n' +
                    '</span> ' +
                    '<p>'+i["title"]+
                    '</p>' +
                    ' </div> ' +
                    '<div class="card-action"> ' +
                    '<a href="/notes/show/isSignature/'+i["id"]+'" target="_blank">PDF</a> ' +
                    '<a class="waves-effect waves-light modal-trigger" href="#modal1" onclick="getDetailNote('+i.id+')">Подробнее</a> ' +
                    '<a href="#">' +
                    file +
                    '</a> ' +
                    '</div> ' +
                    '<div class="card-reveal" style="background-color: #546e7ab8;">' +
                        '<span class="card-title white-text text-darken-4" style="margin-top:-1px">СЗ №'+
                        i["number"]+
                        '<i class="material-icons right">close</i></span>'+
                    '<span class="card-content grey-text text-darken-4" style="color:#ffffff !important">'+
                    ''+ i["text"] +
                    '</span>'+
                    '</div>' +
                    '</div> ' +
                    '</div> ' +
                    '</div> ' +
                    '</div>';
                }else{
                  empty+=`<a class="waves-effect waves-light modal-trigger new-collection-item collection-item" href="#modal1" onclick="getDetailNote(${i.id})">СЗ №${i["number"]} - ${i["title"]}</a>`;
                }}
            );

          let previous_number_page = '<li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>';
          let next_number_page = '<li class="disabled"><a href="#!"><i class="material-icons">chevron_right</i></a></li>'
            if (data["isPrevious"]){
              previous_number = data["page"]-1;
              let new_list_id = '"'+list_id+'"'
              previous_number_page = "<li class='waves-effect'><a href='#' onclick='loadNotesList(q="+new_list_id+",page="+previous_number+")'><i class=\"material-icons\">chevron_left</i></a></li>\n" +
                      "<li class='waves-effect'><a href='#' onclick='loadNotesList(q="+new_list_id+",page="+previous_number+")'>"+
                      previous_number+
                      '</a></li>\n';
            }
            if (data["isNext"]){
              next_number = data["page"]+1;
              let new_list_id = '"'+list_id+'"'
              next_number_page =
                    "<li class='waves-effect'><a href='#' onclick='loadNotesList(q="+new_list_id+",page="+next_number+")'>"+
                      next_number+
              '</a></li>\n' +
                    "<li class='waves-effect'><a href='#' onclick='loadNotesList(q="+new_list_id+",page="+next_number+")'><i class='material-icons'>chevron_right</i></a></li>\n";
            }

                    let display_card_color = getCookie('display') === 'card'? '#ff985f' : '#546e7a';
                    let display_list_color = getCookie('display') === 'list'? '#ff985f' : '#546e7a';
            let pagination = '' +
                    '<ul class="pagination">\n' +
                    previous_number_page+
                    '    <li class="active"><a href="#!">'+
                    data["page"]+
                    '</a></li>\n' +
                    next_number_page+
                    '  </ul>\n' +
                    '<i class="material-icons" onclick="setDisplay(1,'+"'"+list_id+"'"+','+data["page"]+')" style="\n' +
                    '                    float: right;\n' +
                    '                    cursor: pointer;\n' +
                    '                    position: absolute;\n' +
                    '                    left: 10px;\n' +
                    '                    top: 120px;\n' +
                    '                    font-size: 33px;\n' +
                    '                    color: '+
                    display_card_color+
                    ';\n' +
                    '                ">apps</i>'+
                    '<i class="material-icons" onclick="setDisplay(2,'+"'"+list_id+"'"+','+data["page"]+')" style="\n' +
                    '                    float: right;\n' +
                    '                    cursor: pointer;\n' +
                    '                    position: absolute;\n' +
                    '                    left: 50px;\n' +
                    '                    top: 120px;\n' +
                    '                    font-size: 33px;\n' +
                    '                    color: '+
                    display_list_color+
                    ';\n' +
                    '                ">reorder</i>'+
                    '<i class="material-icons" style="\n' +
                    '    float: right;\n' +
                    '    cursor: pointer;\n' +
                    '    position: absolute;\n' +
                    '    right: 10px;\n' +
                    '    display: block;\n' +
                    '    top: 120px;\n' +
                    '    font-size: 33px;\n' +
                    '    color: #546e7a;\n' +
                    '">filter_list</i>'
            let list = document.getElementById(list_id);
            if (empty === ""){
                empty = "<span style='color: grey;justify-content: center;display: flex;align-items: center;margin: 20px auto;'>Не найдено</span>"
            }else{
              if (display === 'card'){
                if(data["data"].length>10){
                  empty=pagination+"<div style='width:100%'>"+empty+"</div>"+pagination;
                }else{
                  empty=pagination+"<div style='width:100%'>"+empty+"</div>";
                }}else{
                if(data["data"].length>10){
                  empty=pagination+"<div class='collection' style='width:100%'>"+empty+"</div>"+pagination;
                }else{
                  empty=pagination+"<div class='collection' style='width:100%'>"+empty+"</div>";
                }
              }
            }

            list.innerHTML = empty;
        }
    	 async function loadNotesList(q="all", paginator=1){
    	     let url = '/fetch/notes?status='+q+'&page='+paginator;
    	     let display = getCookie("display");
    	     let page = document.getElementById(q);
    	     page.innerHTML = preloader;
    		 await fetch(url).then(async response => {
              if (response.status === 200) {
                 createList(await response.json(), q, display)
              } else {
                throw new Error(response.status);
              }
            }).catch(error => {
                console.log(error);
             });
		}







        function getCookie(name) {
          let matches = document.cookie.match(new RegExp(
            "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
          ));
          return matches ? decodeURIComponent(matches[1]) : undefined;
        }

		function setDisplay(display,q,paginator){
          if (display === 1){
            document.cookie = "display=card";

          }else{
            document.cookie = "display=list"
          }
          loadNotesList(q,paginator)
        }
    </script>
    <script src="https://cdn.ckeditor.com/ckeditor5/27.1.0/classic/ckeditor.js"></script>
    <script>
       ClassicEditor
                .create( document.querySelector( '#editor1' ) )
                .catch( error => {
                    console.error( error );
                } );
    </script>

<!-- Тут CRUD для Notes -->
<script>
    /*Тут создание*/
    let form = document.querySelector("form.form_box");
    form.onsubmit = function(evt){
        evt.preventDefault();
        let formData = new FormData(form);
        createNoteAPI(formData)
    }

    async function createNoteAPI(noteData){
        url = '/fetch/note/create';
        await fetch(url, {
            method: "POST",
            body: noteData,
        }).then(async response => {
                if (response.status === 200) {
                    successCreateToast();
                    updateData();
                }else{
                    errorMessage(await response.json());
                }
            }
        ).catch(error=>{
            errorConnectionToast();
            console.log(error);
        })
    }

    function errorMessage(data){
        if (data.messages != null){
            data.messages.forEach(
                elem => {
                    M.toast({html: `${elem.message}`, classes: "toastError"})
                }
            )
        }else{
            M.toast({html: 'Отправлены не валидные данные', classes: "toastError"})
        }
    }

    function updateData(){
        let status;
        let tabs = document.getElementsByClassName("tabs")[0];
        for (var i=0; i<tabs.children.length; ++i){
            console.log(tabs.children[i]);
            if (tabs.children[i].children[0].classList.contains('active')){
                console.log(tabs.children[i]);
                status = tabs.children[i].getAttribute("data-status");
                console.log(status)
                break;
            }
        }
        loadNotesList(q=status);
    }

    function successCreateToast(){
        M.toast({html: 'СЗ создано', classes: "toastSuccess"})
    }




    /*Ошибка при отсутсвии интернета и серверных ошибках(редактирование, удаление, создание)*/
    function errorConnectionToast(){
        M.toast({html: 'Нет соединения', classes: "toastError"})
    }
</script>


<!--Тут скрипты для формы создания-->
    <script>

        function delete_select(){
            var selects = document.getElementsByClassName('user_select');
            var last_select = selects[selects.length - 1];
            if(selects.length>1) {
                last_select.remove();
            }
        }
        function add_select() {
            var selects = document.getElementsByClassName('user_select');
            var last_select = selects[selects.length - 1];
            var last_number = last_select.children[0].getAttribute("data-tag-id");
            var data = '<span class = "user_select_number" data-tag-id = "' + (1 + parseInt(last_number)) + '">' + (1 + parseInt(last_number)) + '</span><select name="user_'+(1+parseInt(last_number))+'" id="" style="width:430px;">{% for user in users %}<option value="{{ user.pk }}">{{user.first_name|slice:"1"}}.{{user.last_name}}({{ user.profile.position }})</option>{% endfor %}</select>';
            /*var data = `    <span class="user_select_number" data-tag-id="${1+last_number}">${1+last_number}</span>
                            <div class="select-wrapper"><input class="select-dropdown dropdown-trigger" type="text" readonly="true" data-target="select-options-d130c26d-36fa-9aac-4903-69601ab81008">
                                <ul id="select-options-d130c26d-36fa-9aac-4903-69601ab81008" class="dropdown-content select-dropdown" tabindex="0">
                                    {% for user in users %}
                                    <li id="select-options-d130c26d-36fa-9aac-4903-69601ab810080" tabindex="0" {% if forloop.counter == 1 %}class="selected"{% endif %}>
                                        <span>{{user.first_name|slice:"1"}}.{{user.last_name}}({{ user.profile.position }})</span>
                                    </li>
                                    {% endfor %}
                                </ul>
                                <svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
                                <select name="user_1" id="" style="width:430px;" tabindex="-1">
                                    {% for user in users %}
                                        <option value="{{ user.pk }}">{{user.first_name|slice:"1"}}.{{user.last_name}}({{ user.profile.position }})
                                        </option>
                                    {% endfor %}
                                </select>
                            </div>`*/
            let div = document.createElement('div');
            div.classList.add("user_select");
            div.id = "user_selects"
            div.innerHTML = data;
            document.getElementById("user_selects").append(div);
        }
        function file_upload(r){
            var data = r.parentNode.children[1];
            console.log(data);
            if (r.files.length === 0){
                data.innerHTML = "+";
                data.style = 'border:1px dashed grey;color:grey';
            }
            else {
                var z = r.files[0].name;
                data.innerHTML = "<img src=/static/img/success.svg width=20>";
                data.style = 'border:1px solid #a5eb78;color:#a5eb78;padding: 19px 17px;padding-bottom: 12px;';
            }
        }

    </script>
{% endblock %}